/* Lightweight site-specific overrides to minimize inline code */

/* Mobile polish */
html, body { -webkit-text-size-adjust: 100%; }
a, button { touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
html { scroll-behavior: smooth; }
#header nav ul { -webkit-overflow-scrolling: touch; }
/* Use CSS var for iOS visual viewport when available */
.main.fullscreen { min-height: calc(var(--vh, 1vh) * 100); }

/* Fix lightbox positioning - force it to appear at current scroll position instead of top */
.poptrox-overlay {
  position: absolute !important;  /* 改為 absolute 而不是 fixed */
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: auto !important;
  min-height: 100vh !important;
}

.poptrox-popup {
  position: absolute !important;
  display: block !important;
  margin: 0 !important;
}

/* Portfolio thumbnails: ensure correct sizing and remove dimming overlay */
.gallery.custom-gallery .gallery-img { position: relative; transform: none; }
.gallery.custom-gallery .gallery-img:before { display: none !important; content: none !important; background: none !important; }
.gallery.custom-gallery .gallery-img img { filter: none !important; opacity: 1 !important; mix-blend-mode: normal !important; }
.gallery.custom-gallery .gallery-img picture { display: block; width: 100%; height: 100%; }
.gallery.custom-gallery .gallery-img picture img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* Ensure About section stacks image above text on small screens (iPhone Safari) */
@media screen and (max-width: 736px) {
  #About { display: flex !important; flex-direction: column; align-items: center; padding-top: 3em; }
  #About .about-photo { float: none !important; width: min(90vw, 520px); height: auto; margin: 1em auto !important; order: 0; }
  #About .content { width: 100% !important; max-width: 92vw !important; margin: 0 auto; text-align: left; }
}

/* Match About heading font with Services titles (Caveat) */
#about-heading {
  font-family: "Caveat", cursive !important;
  font-weight: 600;
  color: #000 !important;
}

/* Header brand logo size (replaces inline style) */
#header .brand img { height: 45px; display: block; }

/* Social icon sizing (replaces inline style) */
.icon i { font-size: 2rem; line-height: 1; vertical-align: middle; }
.icons .icon i { font-size: 1.2rem; }
.icons .icon { display: inline-flex; align-items: center; gap: 0.35rem; }

/* Lightbox: Remove white caption area completely */
.poptrox-popup {
  padding-bottom: 0 !important;
}
.poptrox-popup .caption {
  display: none !important;
}

/* Lightbox: Enhanced visibility for controls */
/* Close button - make it very visible and prominent */
.poptrox-popup .closer {
  opacity: 0.9 !important;
  z-index: 10 !important;
}
.poptrox-popup .closer:before {
  background: rgba(0, 0, 0, 0.8) url("images/poptrox-closer.svg") center center no-repeat !important;
  background-size: 20px 20px !important;
  box-shadow: inset 0 0 0 3px rgba(255, 255, 255, 0.95), 0 3px 10px rgba(0, 0, 0, 0.4) !important;
  border-radius: 50% !important;
  backdrop-filter: blur(2px);
  width: 44px !important;
  height: 44px !important;
  right: 14px !important;
  top: 14px !important;
  filter: contrast(1.3) brightness(1.2) !important;
}
/* Add a more prominent X using CSS */
.poptrox-popup .closer:after {
  content: "✕" !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  color: #fff !important;
  font-size: 18px !important;
  font-weight: bold !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8) !important;
  pointer-events: none !important;
  z-index: 1 !important;
}
.poptrox-popup:hover .closer,
.poptrox-popup .closer:hover {
  opacity: 1 !important;
}
.poptrox-popup:hover .closer:before,
.poptrox-popup .closer:hover:before {
  background: rgba(0, 0, 0, 0.9) url("images/poptrox-closer.svg") center center no-repeat !important;
  background-size: 22px 22px !important;
  box-shadow: inset 0 0 0 3px rgba(255, 255, 255, 1), 0 4px 12px rgba(0, 0, 0, 0.5) !important;
  transform: scale(1.05) !important;
  filter: contrast(1.4) brightness(1.3) !important;
}
.poptrox-popup:hover .closer:after,
.poptrox-popup .closer:hover:after {
  color: #fff !important;
  font-size: 20px !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9) !important;
}

/* Navigation arrows - make them more subtle and less prominent */
.poptrox-popup .nav-next,
.poptrox-popup .nav-previous {
  opacity: 0.25 !important;
}
.poptrox-popup .nav-next:before,
.poptrox-popup .nav-previous:before {
  background: rgba(0, 0, 0, 0.4) url("images/poptrox-nav.svg") center center no-repeat !important;
  background-size: 28px 20px !important;
  border-radius: 50% !important;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2), inset 0 0 0 2px rgba(255, 255, 255, 0.5) !important;
  backdrop-filter: blur(1px);
  width: 80px !important;
  height: 80px !important;
  margin: -40px 0 0 0 !important;
  filter: none !important;
}
.poptrox-popup:hover .nav-next,
.poptrox-popup:hover .nav-previous {
  opacity: 0.6 !important;
}
.poptrox-popup:hover .nav-next:hover,
.poptrox-popup:hover .nav-previous:hover {
  opacity: 0.8 !important;
}
.poptrox-popup:hover .nav-next:before,
.poptrox-popup:hover .nav-previous:before {
  background-color: rgba(0, 0, 0, 0.5) !important;
  background-size: 30px 22px !important;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3), inset 0 0 0 2px rgba(255, 255, 255, 0.7) !important;
}

/* Touch devices - keep controls subtle but functional */
body.is-touch .poptrox-popup .nav-next,
body.is-touch .poptrox-popup .nav-previous {
  opacity: 0.4 !important;
}
body.is-touch .poptrox-popup .closer {
  opacity: 0.85 !important;
}

/* Mobile adjustments */
@media screen and (max-width: 736px) {
  .poptrox-popup .nav-next:before,
  .poptrox-popup .nav-previous:before {
    width: 60px !important;
    height: 60px !important;
    margin: -30px 0 0 0 !important;
    background-size: 22px 16px !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2), inset 0 0 0 2px rgba(255, 255, 255, 0.4) !important;
  }
  .poptrox-popup:hover .nav-next:before,
  .poptrox-popup:hover .nav-previous:before {
    background-size: 24px 18px !important;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3), inset 0 0 0 2px rgba(255, 255, 255, 0.6) !important;
  }
  .poptrox-popup .closer:before {
    background: rgba(0, 0, 0, 0.8) url("images/poptrox-closer.svg") center center no-repeat !important;
    background-size: 16px 16px !important;
    box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.9), 0 2px 6px rgba(0, 0, 0, 0.3) !important;
    width: 36px !important;
    height: 36px !important;
    right: 10px !important;
    top: 10px !important;
    filter: contrast(1.3) brightness(1.2) !important;
  }
  .poptrox-popup .closer:after {
    font-size: 14px !important;
  }
  .poptrox-popup:hover .closer:after,
  .poptrox-popup .closer:hover:after {
    font-size: 16px !important;
  }
}
